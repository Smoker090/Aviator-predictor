let history = [];
let pinkCounter = 0;

function predictNext() {
  const input = parseFloat(document.getElementById("crashInput").value);
  const mode = document.getElementById("riskMode").value;
  let prediction = "Analyzing...";

  history.push(input);
  if (history.length > 10) history.shift();

  const recentCrashes = history.filter(v => v < 1.5).length;
  const recentGreens = history.filter(v => v >= 2.0).length;

  // Crash Prediction
  if (recentCrashes >= 3) {
    prediction = "ðŸ›‘ High crash risk! Play safe.";
  } else if (recentGreens >= 3) {
    prediction = "ðŸš€ Possible pink round incoming!";
    pinkCounter++;
  } else {
    prediction = mode === "safe" ? "ðŸŸ¢ Safe round likely." : "ðŸ”¥ Try aggressive mode.";
  }

  // Pink Round Alert
  if (pinkCounter >= 2) {
    prediction += " ðŸŽ€ Pink Alert!";
    pinkCounter = 0;
  }

  document.getElementById("result").innerText = prediction;
}
